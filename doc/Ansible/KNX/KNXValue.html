<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>Class: Ansible::KNX::KNXValue</title>

<link type="text/css" media="screen" href="../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../../index.html">Home</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>knx/knx_value.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="../../Object.html">Object</a>
  
</nav>

    <!-- Included Modules -->
<nav id="includes-section" class="section">
  <h3 class="section-header">Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="../AnsibleValue.html">Ansible::AnsibleValue</a>
  
  
  </ul>
</nav>

    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-id_generator">::id_generator</a>
    
    <li><a href="#method-c-new">::new</a>
    
    <li><a href="#method-c-transceiver">::transceiver</a>
    
    <li><a href="#method-c-transceiver-3D">::transceiver=</a>
    
    <li><a href="#method-i-3D-3D">#==</a>
    
    <li><a href="#method-i-explain">#explain</a>
    
    <li><a href="#method-i-getparam">#getparam</a>
    
    <li><a href="#method-i-group_primary-3D">#group_primary=</a>
    
    <li><a href="#method-i-groups-3D">#groups=</a>
    
    <li><a href="#method-i-read_only-3F">#read_only?</a>
    
    <li><a href="#method-i-read_value">#read_value</a>
    
    <li><a href="#method-i-to_apdu">#to_apdu</a>
    
    <li><a href="#method-i-to_s">#to_s</a>
    
    <li><a href="#method-i-update_from_frame">#update_from_frame</a>
    
    <li><a href="#method-i-validate_ranges">#validate_ranges</a>
    
    <li><a href="#method-i-write_only-3F">#write_only?</a>
    
    <li><a href="#method-i-write_value">#write_value</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../../README.html">README</a>
  
    <li class="file"><a href="../../license/LICENSE.html">LICENSE</a>
  
    <li class="file"><a href="../../license/gpl_txt.html">gpl</a>
  
    <li class="file"><a href="../../license/lgpl_txt.html">lgpl</a>
  
    <li class="file"><a href="../../monit/monitrc-ansible.html">monitrc-ansible</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../../Ansible.html">Ansible</a>
  
    <li><a href="../../Ansible/AnsibleCallback.html">Ansible::AnsibleCallback</a>
  
    <li><a href="../../Ansible/AnsibleValue.html">Ansible::AnsibleValue</a>
  
    <li><a href="../../Ansible/Device.html">Ansible::Device</a>
  
    <li><a href="../../Ansible/Dimmer.html">Ansible::Dimmer</a>
  
    <li><a href="../../Ansible/KNX.html">Ansible::KNX</a>
  
    <li><a href="../../Ansible/KNX/Canonical_1bit.html">Ansible::KNX::Canonical_1bit</a>
  
    <li><a href="../../Ansible/KNX/DPT1.html">Ansible::KNX::DPT1</a>
  
    <li><a href="../../Ansible/KNX/DPT10.html">Ansible::KNX::DPT10</a>
  
    <li><a href="../../Ansible/KNX/DPT10/DPT10_Frame.html">Ansible::KNX::DPT10::DPT10_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPT11.html">Ansible::KNX::DPT11</a>
  
    <li><a href="../../Ansible/KNX/DPT11/DPT11_Frame.html">Ansible::KNX::DPT11::DPT11_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPT12.html">Ansible::KNX::DPT12</a>
  
    <li><a href="../../Ansible/KNX/DPT12/DPT12_Frame.html">Ansible::KNX::DPT12::DPT12_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPT13.html">Ansible::KNX::DPT13</a>
  
    <li><a href="../../Ansible/KNX/DPT13/DPT13_Frame.html">Ansible::KNX::DPT13::DPT13_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPT14.html">Ansible::KNX::DPT14</a>
  
    <li><a href="../../Ansible/KNX/DPT14/DPT14_Float.html">Ansible::KNX::DPT14::DPT14_Float</a>
  
    <li><a href="../../Ansible/KNX/DPT14/DPT14_Frame.html">Ansible::KNX::DPT14::DPT14_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPT15.html">Ansible::KNX::DPT15</a>
  
    <li><a href="../../Ansible/KNX/DPT15/DPT15_Frame.html">Ansible::KNX::DPT15::DPT15_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPT16.html">Ansible::KNX::DPT16</a>
  
    <li><a href="../../Ansible/KNX/DPT16/DPT16_Frame.html">Ansible::KNX::DPT16::DPT16_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPT17.html">Ansible::KNX::DPT17</a>
  
    <li><a href="../../Ansible/KNX/DPT17/DPT17_Frame.html">Ansible::KNX::DPT17::DPT17_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPT18.html">Ansible::KNX::DPT18</a>
  
    <li><a href="../../Ansible/KNX/DPT18/DPT18_Frame.html">Ansible::KNX::DPT18::DPT18_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPT19.html">Ansible::KNX::DPT19</a>
  
    <li><a href="../../Ansible/KNX/DPT19/DPT19_Frame.html">Ansible::KNX::DPT19::DPT19_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPT1/DPT1_Frame.html">Ansible::KNX::DPT1::DPT1_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPT2.html">Ansible::KNX::DPT2</a>
  
    <li><a href="../../Ansible/KNX/DPT2/DPT2_Frame.html">Ansible::KNX::DPT2::DPT2_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPT3.html">Ansible::KNX::DPT3</a>
  
    <li><a href="../../Ansible/KNX/DPT3/DPT3_Frame.html">Ansible::KNX::DPT3::DPT3_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPT4.html">Ansible::KNX::DPT4</a>
  
    <li><a href="../../Ansible/KNX/DPT4/DPT4_Frame.html">Ansible::KNX::DPT4::DPT4_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPT5.html">Ansible::KNX::DPT5</a>
  
    <li><a href="../../Ansible/KNX/DPT5/DPT5_Frame.html">Ansible::KNX::DPT5::DPT5_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPT6.html">Ansible::KNX::DPT6</a>
  
    <li><a href="../../Ansible/KNX/DPT6/DPT6_Frame.html">Ansible::KNX::DPT6::DPT6_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPT7.html">Ansible::KNX::DPT7</a>
  
    <li><a href="../../Ansible/KNX/DPT7/DPT7_Frame.html">Ansible::KNX::DPT7::DPT7_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPT8.html">Ansible::KNX::DPT8</a>
  
    <li><a href="../../Ansible/KNX/DPT8/DPT8_Frame.html">Ansible::KNX::DPT8::DPT8_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPT9.html">Ansible::KNX::DPT9</a>
  
    <li><a href="../../Ansible/KNX/DPT9/DPT9_Float.html">Ansible::KNX::DPT9::DPT9_Float</a>
  
    <li><a href="../../Ansible/KNX/DPT9/DPT9_Frame.html">Ansible::KNX::DPT9::DPT9_Frame</a>
  
    <li><a href="../../Ansible/KNX/DPTFrame.html">Ansible::KNX::DPTFrame</a>
  
    <li><a href="../../Ansible/KNX/Dimmer.html">Ansible::KNX::Dimmer</a>
  
    <li><a href="../../Ansible/KNX/EISType.html">Ansible::KNX::EISType</a>
  
    <li><a href="../../Ansible/KNX/KNXValue.html">Ansible::KNX::KNXValue</a>
  
    <li><a href="../../Ansible/KNX/KNX_Transceiver.html">Ansible::KNX::KNX_Transceiver</a>
  
    <li><a href="../../Ansible/KNX/KNX_Transceiver/NormalExit.html">Ansible::KNX::KNX_Transceiver::NormalExit</a>
  
    <li><a href="../../Ansible/KNX/L_DATA_Frame.html">Ansible::KNX::L_DATA_Frame</a>
  
    <li><a href="../../Ansible/KNX/ScalarValue.html">Ansible::KNX::ScalarValue</a>
  
    <li><a href="../../Ansible/KNX/Scene.html">Ansible::KNX::Scene</a>
  
    <li><a href="../../Ansible/KNX/TP_ControlField.html">Ansible::KNX::TP_ControlField</a>
  
    <li><a href="../../Ansible/Switch.html">Ansible::Switch</a>
  
    <li><a href="../../Ansible/Transceiver.html">Ansible::Transceiver</a>
  
    <li><a href="../../Ansible/ZWave.html">Ansible::ZWave</a>
  
    <li><a href="../../Ansible/ZWave/Dimmer.html">Ansible::ZWave::Dimmer</a>
  
    <li><a href="../../Ansible/ZWave/ValueID.html">Ansible::ZWave::ValueID</a>
  
    <li><a href="../../Ansible/ZWave/ValueType_Bool.html">Ansible::ZWave::ValueType_Bool</a>
  
    <li><a href="../../Ansible/ZWave/ValueType_Button.html">Ansible::ZWave::ValueType_Button</a>
  
    <li><a href="../../Ansible/ZWave/ValueType_Byte.html">Ansible::ZWave::ValueType_Byte</a>
  
    <li><a href="../../Ansible/ZWave/ValueType_Decimal.html">Ansible::ZWave::ValueType_Decimal</a>
  
    <li><a href="../../Ansible/ZWave/ValueType_Int.html">Ansible::ZWave::ValueType_Int</a>
  
    <li><a href="../../Ansible/ZWave/ValueType_List.html">Ansible::ZWave::ValueType_List</a>
  
    <li><a href="../../Ansible/ZWave/ValueType_Short.html">Ansible::ZWave::ValueType_Short</a>
  
    <li><a href="../../Ansible/ZWave/ValueType_String.html">Ansible::ZWave::ValueType_String</a>
  
    <li><a href="../../Ansible/ZWave/ZWave_Transceiver.html">Ansible::ZWave::ZWave_Transceiver</a>
  
    <li><a href="../../DPT10.html">DPT10</a>
  
    <li><a href="../../DPT9.html">DPT9</a>
  
    <li><a href="../../DPT9_Float.html">DPT9_Float</a>
  
    <li><a href="../../EIBAddr.html">EIBAddr</a>
  
    <li><a href="../../EIBBuffer.html">EIBBuffer</a>
  
    <li><a href="../../EIBConnection.html">EIBConnection</a>
  
    <li><a href="../../EIBInt16.html">EIBInt16</a>
  
    <li><a href="../../EIBInt32.html">EIBInt32</a>
  
    <li><a href="../../EIBInt8.html">EIBInt8</a>
  
    <li><a href="../../OZW_ValueID_id.html">OZW_ValueID_id</a>
  
    <li><a href="../../OZW_ValueID_id1.html">OZW_ValueID_id1</a>
  
    <li><a href="../../Object.html">Object</a>
  
    <li><a href="../../OpenZWave.html">OpenZWave</a>
  
    <li><a href="../../OrbiterProxy.html">OrbiterProxy</a>
  
    <li><a href="../../String.html">String</a>
  
    <li><a href="../../Test.html">Test</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class Ansible::KNX::KNXValue</h1>

  <div id="description" class="description">
    
<p>a <a href="KNXValue.html">KNXValue</a> is a device-dependant datapoint. It
is initialized by a</p>

<p>DPT type name (e.g. “1.001” for binary switch) and is extended  by the
initializer with the corresponding DPT module (e.g. <a
href="DPT1.html">KNX::DPT1</a>) so as to handle <a
href="DPT1.html">DPT1</a> frames. Each <a href="KNXValue.html">KNXValue</a>
is linked to zero or more group addresses, the first of which will be the
“update” value</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <!-- Attributes -->
    <section id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="attribute-i-description" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">description</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-dpt_basetype" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">dpt_basetype</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-dpt_subtype" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">dpt_subtype</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-flags" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">flags</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>set flag: <a href="http://:r">knxvalue.flags</a> = true get flag: <a
href="http://:r">knxvalue.flags</a>  (evaluates to true, meaning the read
flag is set)</p>
        
        </div>
      </div>
      
      <div id="attribute-i-groups" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">groups</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-id" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">id</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
    </section><!-- attribute-method-details -->
    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-id_generator" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">id_generator</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="id_generator-source">
            <pre><span class="ruby-comment"># File knx/knx_value.rb, line 50</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">KNXValue</span>.<span class="ruby-identifier">id_generator</span>
    <span class="ruby-identifier">@@ids</span> = <span class="ruby-identifier">@@ids</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">@@ids</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- id_generator-source -->
          
        </div>

        

        
      </div><!-- id_generator-method -->

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(dpt, groups=[], flags=nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>initialize a <a href="KNXValue.html">KNXValue</a></p>

<h3 id="method-c-new-label-Arguments%3A+">Arguments: </h3>
<dl class="rdoc-list label-list"><dt>dpt
<dd>
<p>string representing the DPT (datapoint type) of the value e.g. “5.001”
meaning <a href="DPT5.html">DPT5</a> percentage value (8-bit unsigned)</p>
</dd><dt>groups
<dd>
<p>array of group addresses associated with this datapoint</p>
</dd><dt>flags
<dd>
<p>hash of symbol=&gt;boolean flags regarding its behaviour e.g. {:r =&gt;
true} the value can only respond to read requests on the <a
href="../KNX.html">KNX</a> bus. default flags: READ and WRITE</p>

<pre class="ruby"><span class="ruby-identifier">c</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Communication</span>
<span class="ruby-identifier">r</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Read</span>
<span class="ruby-identifier">w</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Write</span>
<span class="ruby-identifier">t</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Transmit</span>
<span class="ruby-identifier">u</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Update</span>
<span class="ruby-identifier">i</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">read</span> <span class="ruby-identifier">on</span> <span class="ruby-constant">Init</span>
</pre>
</dd></dl>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File knx/knx_value.rb, line 98</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">dpt</span>, <span class="ruby-identifier">groups</span>=[], <span class="ruby-identifier">flags</span>=<span class="ruby-keyword">nil</span>)
    
    <span class="ruby-comment"># init DPT info</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">md</span> = <span class="ruby-regexp">/(\d*)\.(\d*)/</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">dpt</span>) <span class="ruby-keyword">then</span>
        <span class="ruby-ivar">@dpt</span> = <span class="ruby-identifier">dpt</span>
        <span class="ruby-ivar">@dpt_mod</span> = <span class="ruby-constant">Ansible</span><span class="ruby-operator">::</span><span class="ruby-constant">KNX</span>.<span class="ruby-identifier">module_eval</span>(<span class="ruby-node">&quot;DPT#{md[1]}&quot;</span>)
        <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;unknown/undeclared DPT module #{dpt}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@dpt_mod</span>.<span class="ruby-identifier">is_a?</span><span class="ruby-constant">Module</span>
        <span class="ruby-ivar">@parserclass</span> = <span class="ruby-ivar">@dpt_mod</span>.<span class="ruby-identifier">module_eval</span>(<span class="ruby-node">&quot;DPT#{md[1]}_Frame&quot;</span>)
        <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;unknown/undeclared parser for DPT #{dpt}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@parserclass</span>.<span class="ruby-identifier">ancestors</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-constant">DPTFrame</span>)
        <span class="ruby-ivar">@dpt_basetype</span> = <span class="ruby-ivar">@dpt_mod</span><span class="ruby-operator">::</span><span class="ruby-constant">Basetype</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;missing Basetype info for #{dpt}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@dpt_basetype</span>.<span class="ruby-identifier">is_a?</span><span class="ruby-constant">Hash</span>
        <span class="ruby-ivar">@dpt_subtype</span> = <span class="ruby-ivar">@dpt_mod</span><span class="ruby-operator">::</span><span class="ruby-constant">Subtypes</span>[<span class="ruby-identifier">md</span>[<span class="ruby-value">2</span>]]
        <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;missing sybtype info for #{dpt}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@dpt_subtype</span>.<span class="ruby-identifier">is_a?</span><span class="ruby-constant">Hash</span>
        <span class="ruby-comment"># extend this object with DPT-specific module </span>
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">extend</span>(<span class="ruby-ivar">@dpt_mod</span>)
        <span class="ruby-comment"># print out some useful debug info                    </span>
        <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;  dpt_basetype = #{@dpt_basetype},  dpt_subtype = #{@dpt_subtype}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$DEBUG</span>
    <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;invalid datapoint type (#{dpt})&quot;</span>
    <span class="ruby-keyword">end</span>
    
    <span class="ruby-comment"># array of GroupAddress objects associated with this datapoint</span>
    <span class="ruby-comment"># only the first address is used in a  write operation (TODO: CHECKME)</span>
    <span class="ruby-ivar">@groups</span> = <span class="ruby-keyword">case</span> <span class="ruby-identifier">groups</span>
        <span class="ruby-keyword">when</span> <span class="ruby-constant">Fixnum</span> <span class="ruby-keyword">then</span> <span class="ruby-constant">Array</span>[<span class="ruby-identifier">group</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-constant">String</span> <span class="ruby-keyword">then</span> <span class="ruby-constant">Array</span>[<span class="ruby-identifier">str2addr</span>(<span class="ruby-identifier">groups</span>)] 
        <span class="ruby-keyword">when</span> <span class="ruby-constant">Array</span> <span class="ruby-keyword">then</span> <span class="ruby-identifier">groups</span>
    <span class="ruby-keyword">end</span>
    
    <span class="ruby-comment"># store DPT info about these group addresses</span>
    <span class="ruby-ivar">@groups</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">grp</span><span class="ruby-operator">|</span>
        <span class="ruby-comment"># sanity check: is this groupaddr already decaled as a different basetype?</span>
        <span class="ruby-comment"># FIXME: specs dont forbid it, only check required is datalength compatibility</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">@@AllGroups</span>[<span class="ruby-identifier">grp</span>] <span class="ruby-keyword">and</span> (<span class="ruby-identifier">old_dpt</span> = <span class="ruby-identifier">@@AllGroups</span>[<span class="ruby-identifier">grp</span>][<span class="ruby-value">:dpt_basetype</span>]) <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> (<span class="ruby-identifier">old_dpt</span>.<span class="ruby-identifier">eql?</span>(<span class="ruby-ivar">@dpt_basetype</span>))                           
            <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Group address #{addr2str(grp)} is already declared as DPT basetype #{old_dpt}!&quot;</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;adding groupaddr #{addr2str(grp,true) } (#{@dpt}: #{@dpt_subtype[:name]}), to global hash&quot;</span>
        <span class="ruby-identifier">@@AllGroups</span>[<span class="ruby-identifier">grp</span>] = {<span class="ruby-value">:basetype</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@dpt_basetype</span>, <span class="ruby-value">:subtype</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@dpt_subtype</span>}
    }
    
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">flags</span>.<span class="ruby-identifier">nil?</span>
        <span class="ruby-comment"># default flags: READ and WRITE</span>
        <span class="ruby-ivar">@flags</span> = {<span class="ruby-value">:r</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>,<span class="ruby-value">:w</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>}
    <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;flags parameter must be a Hash!&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">flags</span>.<span class="ruby-identifier">is_a?</span><span class="ruby-constant">Hash</span>
        <span class="ruby-ivar">@flags</span> = <span class="ruby-identifier">flags</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># TODO: physical address: set only for remote nodes we are monitoring</span>
    <span class="ruby-comment"># when left to nil, it/ means a datapoint on this KNXTransceiver </span>
    <span class="ruby-ivar">@physaddr</span> = <span class="ruby-keyword">nil</span>
    
    <span class="ruby-comment"># id of datapoint</span>
    <span class="ruby-comment"># initialized by class method KNXValue.id_generator</span>
    <span class="ruby-ivar">@id</span> = <span class="ruby-constant">KNXValue</span>.<span class="ruby-identifier">id_generator</span>()
    
    <span class="ruby-ivar">@description</span> = <span class="ruby-string">''</span>
    
    <span class="ruby-comment"># store this KNXValue in the Ansible database</span>
    <span class="ruby-constant">AnsibleValue</span>.<span class="ruby-identifier">insert</span>(<span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
      <div id="method-c-transceiver" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">transceiver</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="transceiver-source">
            <pre><span class="ruby-comment"># File knx/knx_value.rb, line 60</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">KNXValue</span>.<span class="ruby-identifier">transceiver</span>; <span class="ruby-keyword">return</span> <span class="ruby-identifier">@@transceiver</span>; <span class="ruby-keyword">end</span></pre>
          </div><!-- transceiver-source -->
          
        </div>

        

        
      </div><!-- transceiver-method -->

    
      <div id="method-c-transceiver-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">transceiver=</span><span
            class="method-args">(other)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="transceiver-3D-source">
            <pre><span class="ruby-comment"># File knx/knx_value.rb, line 61</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">KNXValue</span>.<span class="ruby-identifier">transceiver=</span>(<span class="ruby-identifier">other</span>); 
    <span class="ruby-identifier">@@transceiver</span> = <span class="ruby-identifier">other</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Ansible</span><span class="ruby-operator">::</span><span class="ruby-constant">KNX</span><span class="ruby-operator">::</span><span class="ruby-constant">KNX_Transceiver</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- transceiver-3D-source -->
          
        </div>

        

        
      </div><!-- transceiver-3D-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-3D-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">==</span><span
            class="method-args">(other)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>equality checking</p>
          

          
          <div class="method-source-code" id="3D-3D-source">
            <pre><span class="ruby-comment"># File knx/knx_value.rb, line 70</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">==</span> (<span class="ruby-identifier">other</span>)
    <span class="ruby-keyword">return</span> (<span class="ruby-identifier">other</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">KNXValue</span>) <span class="ruby-keyword">and</span> (<span class="ruby-ivar">@id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">id</span>))
<span class="ruby-keyword">end</span></pre>
          </div><!-- 3D-3D-source -->
          
        </div>

        

        
      </div><!-- 3D-3D-method -->

    
      <div id="method-i-explain" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">explain</span><span
            class="method-args">(frame)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>return a human-readable representation of a DPT frame</p>
          

          
          <div class="method-source-code" id="explain-source">
            <pre><span class="ruby-comment"># File knx/knx_value.rb, line 293</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">explain</span>(<span class="ruby-identifier">frame</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;explain() expects a DPTFrame, got a #{frame.class}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">frame</span>.<span class="ruby-identifier">is_a?</span><span class="ruby-constant">DPTFrame</span>
    <span class="ruby-identifier">fielddata</span> = []
    <span class="ruby-comment"># iterate over all available DPT fields</span>
    <span class="ruby-identifier">frame</span>.<span class="ruby-identifier">field_names</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">fieldname</span><span class="ruby-operator">|</span>
        <span class="ruby-comment"># skip padding fields</span>
        <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-regexp">/pad/</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">fieldname</span>)
        <span class="ruby-identifier">field</span> = <span class="ruby-identifier">frame</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">fieldname</span>)
        <span class="ruby-identifier">fval</span> = <span class="ruby-identifier">field</span>.<span class="ruby-identifier">value</span>
        <span class="ruby-comment"># get value encoding hashmap, if any</span>
        <span class="ruby-identifier">vhash</span> = <span class="ruby-identifier">getparam</span>(<span class="ruby-value">:enc</span>, <span class="ruby-identifier">field</span>)
        <span class="ruby-comment"># get value units</span>
        <span class="ruby-identifier">units</span> = <span class="ruby-identifier">getparam</span>(<span class="ruby-value">:unit</span>, <span class="ruby-identifier">field</span>) 
        <span class="ruby-identifier">fval</span> = <span class="ruby-identifier">as_canonical_value</span>()
        <span class="ruby-comment"># add field value, according to encoding hashtable</span>
        <span class="ruby-identifier">fielddata</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{(vhash.is_a?Hash) ? vhash[fval] : fval} #{units}&quot;</span>
    } 
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">fielddata</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">', '</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- explain-source -->
          
        </div>

        

        
      </div><!-- explain-method -->

    
      <div id="method-i-getparam" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">getparam</span><span
            class="method-args">(param, field=nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>get a DPT parameter, trying to locate it in the following order:</p>

<pre>1) in the DPTFrame field definition 
2) in the DPT subtype definition
3) in the DPT basetype definition</pre>
          

          
          <div class="method-source-code" id="getparam-source">
            <pre><span class="ruby-comment"># File knx/knx_value.rb, line 317</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">getparam</span>(<span class="ruby-identifier">param</span>, <span class="ruby-identifier">field</span>=<span class="ruby-keyword">nil</span>)
    <span class="ruby-keyword">return</span> ((<span class="ruby-identifier">field</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">get_parameter</span>(<span class="ruby-identifier">param</span>)) <span class="ruby-keyword">or</span> 
            (<span class="ruby-ivar">@dpt_subtype</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@dpt_subtype</span>[<span class="ruby-identifier">param</span>]) <span class="ruby-keyword">or</span> 
            (<span class="ruby-ivar">@dpt_basetype</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@dpt_basetype</span>[<span class="ruby-identifier">param</span>]))
<span class="ruby-keyword">end</span></pre>
          </div><!-- getparam-source -->
          
        </div>

        

        
      </div><!-- getparam-method -->

    
      <div id="method-i-group_primary-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">group_primary=</span><span
            class="method-args">(grpaddr)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>set primary group address</p>
          

          
          <div class="method-source-code" id="group_primary-3D-source">
            <pre><span class="ruby-comment"># File knx/knx_value.rb, line 233</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">group_primary=</span>(<span class="ruby-identifier">grpaddr</span>)
    <span class="ruby-ivar">@groups</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-identifier">grpaddr</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- group_primary-3D-source -->
          
        </div>

        

        
      </div><!-- group_primary-3D-method -->

    
      <div id="method-i-groups-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">groups=</span><span
            class="method-args">(other)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>assign a new array of group addresses for this datapoint</p>
          

          
          <div class="method-source-code" id="groups-3D-source">
            <pre><span class="ruby-comment"># File knx/knx_value.rb, line 238</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">groups=</span>(<span class="ruby-identifier">other</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;KNXValue.groups= requires an array of at least one group addresses&quot;</span> <span class="ruby-keyword">unless</span> (<span class="ruby-identifier">other</span>.<span class="ruby-identifier">is_a?</span><span class="ruby-constant">Array</span>) <span class="ruby-keyword">and</span> (<span class="ruby-identifier">other</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
    <span class="ruby-ivar">@groups</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">other</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- groups-3D-source -->
          
        </div>

        

        
      </div><!-- groups-3D-method -->

    
      <div id="method-i-read_only-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">read_only?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>is this <a href="../KNX.html">KNX</a> datapoint read only?</p>
          

          
          <div class="method-source-code" id="read_only-3F-source">
            <pre><span class="ruby-comment"># File knx/knx_value.rb, line 161</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">read_only?</span>
    <span class="ruby-keyword">return</span>((<span class="ruby-keyword">defined?</span> <span class="ruby-ivar">@flags</span>) <span class="ruby-keyword">and</span> (<span class="ruby-ivar">@flags</span>[<span class="ruby-value">:r</span>] <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-ivar">@flags</span>[<span class="ruby-value">:w</span>]))
<span class="ruby-keyword">end</span></pre>
          </div><!-- read_only-3F-source -->
          
        </div>

        

        
      </div><!-- read_only-3F-method -->

    
      <div id="method-i-read_value" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">read_value</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>read value from eibd’s group cache, or issue a read request, hoping that
someone will respond with the last known status for this value</p>
          

          
          <div class="method-source-code" id="read_value-source">
            <pre><span class="ruby-comment"># File knx/knx_value.rb, line 173</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">read_value</span>()
    <span class="ruby-keyword">if</span> (<span class="ruby-keyword">not</span> <span class="ruby-ivar">@groups</span>.<span class="ruby-identifier">nil?</span>) <span class="ruby-keyword">and</span> (<span class="ruby-identifier">group</span> = <span class="ruby-ivar">@groups</span>[<span class="ruby-value">0</span>]) <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">if</span> (<span class="ruby-identifier">data</span> = <span class="ruby-identifier">@@transceiver</span>.<span class="ruby-identifier">read_eibd_cache</span>(<span class="ruby-identifier">group</span>)) <span class="ruby-keyword">then</span>
            <span class="ruby-identifier">fire_callback</span>(<span class="ruby-value">:onReadCacheHit</span>)
            <span class="ruby-comment"># update the value</span>
            <span class="ruby-identifier">update</span>(<span class="ruby-ivar">@parserclass</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">data</span>.<span class="ruby-identifier">pack</span>(<span class="ruby-string">'c*'</span>)))
        <span class="ruby-keyword">else</span>
            <span class="ruby-comment"># value not found in cache, maybe some other</span>
            <span class="ruby-comment"># device on the bus will respond...</span>
            <span class="ruby-identifier">fire_callback</span>(<span class="ruby-value">:onReadCacheMiss</span>)
            <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- read_value-source -->
          
        </div>

        

        
      </div><!-- read_value-method -->

    
      <div id="method-i-to_apdu" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_apdu</span><span
            class="method-args">(frame, apci_code = 0x40)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>create apdu for this <a href="KNXValue.html">KNXValue</a> APDU types are:</p>

<pre class="ruby"><span class="ruby-value">0x00</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Read</span>
<span class="ruby-value">0x40</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Response</span> (<span class="ruby-identifier">default</span>)
<span class="ruby-value">0x80</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Write</span>
</pre>
          

          
          <div class="method-source-code" id="to_apdu-source">
            <pre><span class="ruby-comment"># File knx/knx_value.rb, line 256</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_apdu</span>(<span class="ruby-identifier">frame</span>, <span class="ruby-identifier">apci_code</span> = <span class="ruby-value">0x40</span>)
    <span class="ruby-identifier">apdu</span> = <span class="ruby-keyword">if</span> <span class="ruby-ivar">@dpt_mod</span><span class="ruby-operator">::</span><span class="ruby-constant">Basetype</span>[<span class="ruby-value">:bitlength</span>] <span class="ruby-operator">&lt;=</span> <span class="ruby-value">6</span> <span class="ruby-keyword">then</span>
        <span class="ruby-comment">#[0, apci_code | @current_value]</span>
        [<span class="ruby-value">0</span>, <span class="ruby-identifier">apci_code</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">frame</span>.<span class="ruby-identifier">data</span>]
    <span class="ruby-keyword">else</span>
        <span class="ruby-comment">#[0, apci_code] + @current_value.to_a</span>
        [<span class="ruby-value">0</span>, <span class="ruby-identifier">apci_code</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">frame</span>.<span class="ruby-identifier">to_binary_s</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-string">'C*'</span>) 
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">apdu</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_apdu-source -->
          
        </div>

        

        
      </div><!-- to_apdu-method -->

    
      <div id="method-i-to_s" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_s</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>human-readable representation of the value. Uses all field info from its
DPT included module, if available.</p>
          

          
          <div class="method-source-code" id="to_s-source">
            <pre><span class="ruby-comment"># File knx/knx_value.rb, line 282</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_s</span>
    <span class="ruby-identifier">dpt_name</span> = (<span class="ruby-ivar">@dpt_subtype</span>.<span class="ruby-identifier">nil?</span>) <span class="ruby-operator">?</span> <span class="ruby-string">''</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@dpt_subtype</span>[<span class="ruby-value">:name</span>] 
    <span class="ruby-identifier">dpt_info</span> = <span class="ruby-node">&quot;KNXValue[#{@dpt} #{dpt_name}]&quot;</span>
    <span class="ruby-comment"># add field values explanation, if any</span>
    <span class="ruby-identifier">vstr</span> = (<span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@current_value</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">explain</span>(<span class="ruby-ivar">@current_value</span>) <span class="ruby-operator">:</span> <span class="ruby-string">'(value undefined)'</span>)
    <span class="ruby-comment"># return @dpt: values.explained</span>
    <span class="ruby-identifier">gaddrs</span> = <span class="ruby-ivar">@groups</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">ga</span><span class="ruby-operator">|</span> <span class="ruby-identifier">addr2str</span>(<span class="ruby-identifier">ga</span>, <span class="ruby-keyword">true</span>)}.<span class="ruby-identifier">join</span>(<span class="ruby-string">', '</span>)
    <span class="ruby-keyword">return</span> [<span class="ruby-ivar">@description</span>, <span class="ruby-identifier">gaddrs</span>, <span class="ruby-identifier">dpt_info</span>].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">' '</span>) <span class="ruby-operator">+</span> <span class="ruby-node">&quot; : #{vstr}&quot;</span> 
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_s-source -->
          
        </div>

        

        
      </div><!-- to_s-method -->

    
      <div id="method-i-update_from_frame" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">update_from_frame</span><span
            class="method-args">(rawframe)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>update internal state from raw <a href="../KNX.html">KNX</a> frame</p>
          

          
          <div class="method-source-code" id="update_from_frame-source">
            <pre><span class="ruby-comment"># File knx/knx_value.rb, line 268</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_from_frame</span>(<span class="ruby-identifier">rawframe</span>)
    <span class="ruby-identifier">data</span> = <span class="ruby-keyword">if</span> <span class="ruby-ivar">@dpt_mod</span><span class="ruby-operator">::</span><span class="ruby-constant">Basetype</span>[<span class="ruby-value">:bitlength</span>] <span class="ruby-operator">&lt;=</span> <span class="ruby-value">6</span> <span class="ruby-keyword">then</span>
        <span class="ruby-comment"># bindata always expects a binary string</span>
        [<span class="ruby-identifier">rawframe</span>.<span class="ruby-identifier">apci_data</span>].<span class="ruby-identifier">pack</span>(<span class="ruby-string">'c'</span>)
    <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">rawframe</span>.<span class="ruby-identifier">data</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">foo</span> = <span class="ruby-ivar">@parserclass</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">data</span>)
    <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;update_from_frame: #{foo.class} = #{foo.inspect}&quot;</span>
    <span class="ruby-identifier">update</span>(<span class="ruby-identifier">foo</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- update_from_frame-source -->
          
        </div>

        

        
      </div><!-- update_from_frame-method -->

    
      <div id="method-i-validate_ranges" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">validate_ranges</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>make sure all frame fields are valid (within min,max range) see <a
href="../AnsibleValue.html#method-i-update">Ansible::AnsibleValue#update</a></p>
          

          
          <div class="method-source-code" id="validate_ranges-source">
            <pre><span class="ruby-comment"># File knx/knx_value.rb, line 245</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">validate_ranges</span>
    <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span> <span class="ruby-ivar">@current_value</span> <span class="ruby-keyword">then</span>  
        <span class="ruby-ivar">@current_value</span>.<span class="ruby-identifier">validate_ranges</span>
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- validate_ranges-source -->
          
        </div>

        

        
      </div><!-- validate_ranges-method -->

    
      <div id="method-i-write_only-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">write_only?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>is this <a href="../KNX.html">KNX</a> datapoint write only?</p>
          

          
          <div class="method-source-code" id="write_only-3F-source">
            <pre><span class="ruby-comment"># File knx/knx_value.rb, line 166</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">write_only?</span>
    <span class="ruby-keyword">return</span>((<span class="ruby-keyword">defined?</span> <span class="ruby-ivar">@flags</span>) <span class="ruby-keyword">and</span> (<span class="ruby-ivar">@flags</span>[<span class="ruby-value">:w</span>] <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-ivar">@flags</span>[<span class="ruby-value">:r</span>]))
<span class="ruby-keyword">end</span></pre>
          </div><!-- write_only-3F-source -->
          
        </div>

        

        
      </div><!-- write_only-3F-method -->

    
      <div id="method-i-write_value" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">write_value</span><span
            class="method-args">(new_val)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>write value to the bus argument: new_val according to DPT</p>

<pre class="ruby"><span class="ruby-keyword">if</span> :<span class="ruby-identifier">basic</span>, <span class="ruby-keyword">then</span> <span class="ruby-identifier">new_val</span> <span class="ruby-identifier">is</span> <span class="ruby-identifier">plain</span> <span class="ruby-identifier">data</span> <span class="ruby-identifier">value</span>   
<span class="ruby-keyword">else</span> (:<span class="ruby-identifier">composite</span>) <span class="ruby-identifier">new_val</span> <span class="ruby-identifier">is</span> <span class="ruby-identifier">a</span> <span class="ruby-identifier">hash</span> <span class="ruby-identifier">of</span> 
    <span class="ruby-identifier">field_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">field_value</span> <span class="ruby-identifier">pairs</span>
<span class="ruby-identifier">all</span> <span class="ruby-identifier">values</span> <span class="ruby-identifier">get</span> <span class="ruby-identifier">mapped</span> <span class="ruby-identifier">using</span> <span class="ruby-identifier">to_protocol_value</span>() <span class="ruby-keyword">in</span> <span class="ruby-constant">AnsibleValue</span><span class="ruby-operator">::</span><span class="ruby-identifier">update</span>()
</pre>

<p>return true if successful, false otherwise</p>
          

          
          <div class="method-source-code" id="write_value-source">
            <pre><span class="ruby-comment"># File knx/knx_value.rb, line 198</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">write_value</span>(<span class="ruby-identifier">new_val</span>)
    <span class="ruby-comment">#write value to primary group address</span>
    <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">telegram</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@groups</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-keyword">then</span> 
        <span class="ruby-identifier">dest</span> = <span class="ruby-ivar">@groups</span>[<span class="ruby-value">0</span>]
    <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;#{self}: primary group address not set!!!&quot;</span>
    <span class="ruby-keyword">end</span> 
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@dpt_mod</span><span class="ruby-operator">::</span><span class="ruby-constant">Basetype</span>[<span class="ruby-value">:valuetype</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-value">:basic</span> <span class="ruby-keyword">then</span>
        <span class="ruby-comment"># basic value: single 'data' field</span>
        <span class="ruby-identifier">telegram</span> = <span class="ruby-ivar">@parserclass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:data</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">new_val</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-value">:composite</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">new_val</span>.<span class="ruby-identifier">is_a?</span><span class="ruby-constant">Hash</span> <span class="ruby-keyword">then</span>
            <span class="ruby-identifier">telegram</span> = <span class="ruby-ivar">@parserclass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">new_val</span>)
        <span class="ruby-keyword">else</span>
            <span class="ruby-keyword">if</span> <span class="ruby-ivar">@parserclass</span>.<span class="ruby-identifier">methods</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:assign</span>) <span class="ruby-keyword">then</span>
                <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;FIXME&quot;</span>
            <span class="ruby-keyword">else</span>
                <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;#{self} has a composite DPT, set() expects a hash!&quot;</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{self}: Writing new value (#{new_val}) to #{addr2str(dest, true)}&quot;</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-keyword">if</span> (<span class="ruby-identifier">@@transceiver</span>.<span class="ruby-identifier">send_apdu_raw</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">to_apdu</span>(<span class="ruby-identifier">telegram</span>, <span class="ruby-value">0x80</span>)) <span class="ruby-operator">&gt;</span> <span class="ruby-value">-1</span>) <span class="ruby-keyword">then</span>
        <span class="ruby-identifier">update</span>(<span class="ruby-identifier">telegram</span>)
        <span class="ruby-keyword">return</span>(<span class="ruby-keyword">true</span>)
    <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">return</span>(<span class="ruby-keyword">false</span>)
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- write_value-source -->
          
        </div>

        

        
      </div><!-- write_value-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.11.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

